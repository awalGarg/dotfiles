## Prefix
unbind C-b
set-option -g prefix M-`
bind-key M-` send-prefix

## Misc
set -g base-index 1
set -g history-limit 4096

# by default escape takes a while before registering
# no idea why that makes sense, but this disables it
set -g escape-time 0

# when a window is closed and the window number is freed,
# the following windows are renumbered using this
set -g renumber-windows on

# to let vim and other apps use ctrl keys properly
set-window-option -g xterm-keys on

set -g mouse on

# see https://superuser.com/a/972232 why "alternate_on" thing is needed
bind -n WheelUpPane \
 if-shell -F -t = "#{?pane_in_mode,1,#{mouse_any_flag}}" \
  "send-keys -M" \
  "if-shell -F -t = '#{alternate_on}'\
   'send-keys Up' \
   'copy-mode -e'"
# -e switch indicates copy mode should exit when scrolled to end

bind -n WheelDownPane \
 if-shell -F -t = "#{?pane_in_mode,1,#{mouse_any_flag}}" \
  "send-keys -M" \
  "send-keys Down"

## Shortcuts
# toggle hiding the status bar, sometimes handy
bind-key Space set status

# Alt-t for horizontal split
bind-key -n M-t split-window -h
# Alt-Shift-t for vertical split
bind-key -n M-T split-window

# change focus with Alt-arrow_key
bind-key -n M-Up select-pane -U
bind-key -n M-Right select-pane -R
bind-key -n M-Down select-pane -D
bind-key -n M-Left select-pane -L

# move focused pane with Alt-Shift-arrow_key
bind-key -n M-S-Up swap-pane -U
bind-key -n M-S-Right swap-pane -D
bind-key -n M-S-Down swap-pane -D
bind-key -n M-S-Left swap-pane -U

# toggle fullscreen with Alt-f
bind-key -n M-f resize-pane -Z

# break to own window with Alt-b
bind-key -n M-b break-pane

# reload config with Alt-Shift-c
bind-key -n M-C source-file ~/.tmux.conf

# kill pane with Alt-Shift-q
bind-key -n M-Q kill-pane

# detach from session with Alt-d
bind-key -n M-d detach-client

# create new window with Alt-n
bind-key -n M-n new-window

# switch to nth window with Alt-n
bind-key -n M-1 select-window -t :=1
bind-key -n M-2 select-window -t :=2
bind-key -n M-3 select-window -t :=3
bind-key -n M-4 select-window -t :=4
bind-key -n M-5 select-window -t :=5
bind-key -n M-6 select-window -t :=6
bind-key -n M-7 select-window -t :=7
bind-key -n M-8 select-window -t :=8
bind-key -n M-9 select-window -t :=9

# switch to next window with Alt-Tab
bind-key -n M-Tab select-window -n

# switch to previous window with Alt-Ctrl-Tab.
# unfortunately binding Alt-Shift-Tab seems to not work
bind-key -n M-C-Tab select-window -p

# move active pane to nth window to Alt-Shift-n
bind-key -n "M-!" join-pane -t :1
bind-key -n "M-@" join-pane -t :2
bind-key -n "M-#" join-pane -t :3
bind-key -n "M-\$" join-pane -t :4
bind-key -n "M-%" join-pane -t :5
bind-key -n "M-^" join-pane -t :6
bind-key -n "M-&" join-pane -t :7
bind-key -n "M-*" join-pane -t :8
bind-key -n "M-(" join-pane -t :9

# horizontal split current window and open vim in cwd with Alt-e
bind-key -n M-e split-window -h -c '#{pane_current_path}' 'vim .'

# vertical split current window and open vim in cwd with Alt-Shift-e
bind-key -n M-E split-window -c '#{pane_current_path}' 'vim .'

## Appearance
set -g pane-border-fg colour233
set -g pane-active-border-fg colour137

set -g status-bg colour235
set -g status-fg colour137
set -g status-left ''
set -g status-right ''
set -g status-position bottom
set -g status-justify centre # list of windows in middle

setw -g window-status-current-fg colour235
setw -g window-status-current-bg colour137
setw -g window-status-current-format ' #I:#W ' # spaces for padding

setw -g window-status-fg colour137
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I:#W ' # spaces for padding

setw -g window-status-bell-attr none
setw -g window-status-bell-fg colour255
setw -g window-status-bell-bg colour1

set -g message-attr none
set -g message-fg colour232
set -g message-bg colour137

